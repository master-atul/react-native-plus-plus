### Git Pre-push/Pre-commit Hooks

Pre-push/Pre-commit hooks are nothing but a couple of commands which you would want to run every time you push/commit something. Now it might not sound that interesting but using them with jest and eslint can protect the code quality of your code at a much, much higher level.

_How you ask?_

Pre hooks run a shell command which you specify and if the command fails with exit status 1, the process will get terminated. We store the shell commands inside `.git/hooks` directory of root of the project. So imagine that you won't be able to push the code if your tests are failing or your js files are not properly linted. That sound's interesting right?

Now the next question might be, how do you make sure that everyone adds those commands to the pre-push hooks folder. Don't worry we got that covered as well. Let me introduce you to an awesome NPM module called [`husky`](https://www.npmjs.com/package/husky).

After installing these node-modules, all you need to do is specify which command you would like to execute before pushing/committing your code. And all this can be done within `package.json`. It will make sure to add the commands to your local git hooks folder while setting up (npm install) the machine.


We used husky's `prepush` hook to make sure that every line of code which is being pushed is linted and all the tests pass.

If you look at the `package.json` file of our boilerplate, you would find this snippet:

```json
{
  "scripts": {
    "prepush": "npm run lint && npm run test",
    "postinstall": "rm -rf .git/hooks/pre-push && node node_modules/husky/bin/install.js && rm -rf .git/hooks/pre-commit"
  },
  "devDependencies": {
    "husky": "^0.14.3"
  }
}
```
As you can see, we are doing `npm run lint` and `npm run test` every time the developer tries to push something. If any of the command fails, developer would not be allowed to push and you which greatly reduces the chances of build failure/PR check failure in CIs.

<br>
<div style="text-align:center">
  <img src="/assets/images/6/6.2/push-error.png" style="width: 100%;display:inline-block;vertical-align: middle;margin:0" hspace="40">
</div>
<br>

Internally, these modules write in `.git/hooks` folder in `pre-commit/pre-push` files.
After adding these modules and doing npm install, you will find something like this in `.git/hooks/pre-push`:

```shell
#!/bin/sh
#husky 0.14.3

command_exists () {
  command -v "$1" >/dev/null 2>&1
}

has_hook_script () {
  [ -f package.json ] && cat package.json | grep -q "\"$1\"[[:space:]]*:"
}
...
...
```
This code is autogenerated by the node module so we don't have to worry about it. If you are not able to find this file, it means that your hooks were not properly installed. Please uninstall and install the module again or do `npm run postinstall`.

The code till here can be found in the **branch** [chapter/6/6.2](https://github.com/master-atul/react-native-plus-plus-code/tree/chapter/6/6.2)
